<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trò Chơi Tung Tung Sahur</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }
        .game-container {
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
        }
        .game-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 1rem;
            text-align: center;
        }
        .game-status {
            font-size: 1.25rem;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .characters-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            min-height: 150px;
            margin-bottom: 2rem;
        }
        .character-image {
            width: 150px;
            height: auto;
            animation: appear 1s ease-in-out;
        }
        .tung-tung-image {
            transform: scaleX(-1); /* Lật ngang ảnh */
        }
        .action-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: 700;
            color: #dc2626;
            animation: action 2s forwards;
            display: none;
        }
        @keyframes action {
            from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            to { opacity: 0; transform: translate(-50%, -150%) scale(0.5); }
        }
        .question-box {
            background-color: #f7fafc;
            border: 2px solid #e2e8f0;
            padding: 1.5rem;
            border-radius: 1rem;
            width: 100%;
            text-align: center;
        }
        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
        }
        .input-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
            width: 100%;
        }
        .input-field {
            width: 100%;
            max-width: 400px;
            padding: 0.75rem;
            border: 2px solid #cbd5e0;
            border-radius: 9999px;
            font-size: 1rem;
            text-align: center;
        }
        .input-field:focus {
            outline: none;
            border-color: #63b3ed;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.5);
        }
        .button {
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .button:hover:enabled {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .check-button {
            background-color: #2563eb;
            color: white;
        }
        .message-box {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.75rem;
            font-weight: 600;
            text-align: center;
            font-size: 1rem;
        }
        .message-box.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .message-box.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .end-game-container {
            text-align: center;
        }
        .end-game-container h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .end-game-container p {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }
        .medal-image {
            width: 150px;
            height: auto;
            margin-top: 2rem;
            animation: pop-in 1s ease-in-out;
        }
        @keyframes pop-in {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">Tung Tung Sahur vs. Bombardino Crocodilo</h1>
        <p id="game-status" class="game-status">Câu hỏi: 1/10. Tiền thưởng: $0</p>
        
        <div class="characters-container">
            <img src="https://placehold.co/150x150/48bb78/FFFFFF?text=Tung+Tung" alt="Tung Tung Sahur" class="character-image tung-tung-image">
            <img src="https://placehold.co/150x150/dc2626/FFFFFF?text=Crocodilo" alt="Bombardino Crocodilo" class="character-image crocodilo-image">
            <div id="action-message" class="action-message"></div>
        </div>

        <div id="question-box" class="question-box">
            <p id="question-text" class="question-text">Loading...</p>
        </div>

        <div id="input-container" class="input-container">
            <input type="text" id="answer-input" class="input-field" placeholder="Nhập từ còn thiếu...">
            <button id="check-button" class="button check-button">Kiểm Tra</button>
            <div id="feedback-message" class="message-box hidden"></div>
        </div>
        
        <div id="end-game-container" class="end-game-container hidden">
            <h2 id="end-game-message"></h2>
            <p id="final-score"></p>
            <img id="medal-image" src="https://placehold.co/150x150/f6ad55/FFFFFF?text=Medal" alt="Huy chương chiến thắng" class="medal-image hidden">
            <button id="restart-button" class="button check-button mt-4">Chơi Lại</button>
        </div>
    </div>
    
    <script>
        const questions = [
            { question: "I ____ my homework every day.", answer: "do" },
            { question: "She ____ to school yesterday.", answer: "went" },
            { question: "We ____ TV now.", answer: "are watching" },
            { question: "He ____ not like carrots.", answer: "does" },
            { question: "They ____ playing in the park.", answer: "are" },
            { question: "____ you eat breakfast this morning?", answer: "Did" },
            { question: "The cat is ____ the table.", answer: "on" },
            { question: "The children ____ happy yesterday.", answer: "were" },
            { question: "My mom ____ a new dress for me last week.", answer: "bought" },
            { question: "I ____ to be a doctor.", answer: "want" },
            { question: "We ____ to the beach every summer.", answer: "go" },
            { question: "My dad ____ a big car.", answer: "has" },
            { question: "The book is ____ the desk.", answer: "on" },
            { question: "They ____ playing football at the moment.", answer: "are" },
            { question: "She ____ not like to read.", answer: "does" },
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        const totalQuestions = 10;
        let shuffledQuestions = [];

        const gameStatusEl = document.getElementById('game-status');
        const questionTextEl = document.getElementById('question-text');
        const answerInputEl = document.getElementById('answer-input');
        const checkButtonEl = document.getElementById('check-button');
        const feedbackMessageEl = document.getElementById('feedback-message');
        const actionMessageEl = document.getElementById('action-message');
        const endContainerEl = document.getElementById('end-game-container');
        const endGameMessageEl = document.getElementById('end-game-message');
        const finalScoreEl = document.getElementById('final-score');
        const medalImageEl = document.getElementById('medal-image');
        const restartButtonEl = document.getElementById('restart-button');

        function initGame() {
            currentQuestionIndex = 0;
            score = 0;
            shuffledQuestions = shuffleArray(questions).slice(0, totalQuestions);

            gameStatusEl.textContent = `Câu hỏi: 1/${totalQuestions}. Tiền thưởng: $${score}`;
            endContainerEl.classList.add('hidden');
            questionBox.style.display = 'block';
            inputContainer.style.display = 'flex';
            medalImageEl.classList.add('hidden');
            showNextQuestion();
        }

        function showNextQuestion() {
            if (currentQuestionIndex >= totalQuestions) {
                endGame();
                return;
            }
            
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionTextEl.textContent = currentQuestion.question;
            answerInputEl.value = '';
            answerInputEl.focus();
            feedbackMessageEl.classList.add('hidden');
            gameStatusEl.textContent = `Câu hỏi: ${currentQuestionIndex + 1}/${totalQuestions}. Tiền thưởng: $${score}`;
        }

        function handleCheck() {
            const userAnswer = answerInputEl.value.trim().toLowerCase();
            const currentAnswer = shuffledQuestions[currentQuestionIndex].answer.toLowerCase();

            if (userAnswer === currentAnswer) {
                score += 100;
                actionMessageEl.textContent = '+ $100';
                actionMessageEl.style.color = '#48bb78';
                actionMessageEl.style.display = 'block';
                setTimeout(() => {
                    actionMessageEl.style.display = 'none';
                }, 2000);
                feedbackMessageEl.textContent = 'Chính xác! Tung Tung Sahur tặng bạn $100!';
                feedbackMessageEl.className = 'message-box correct';
            } else {
                score -= 30;
                actionMessageEl.textContent = 'Ăn thịt! - $30';
                actionMessageEl.style.color = '#dc2626';
                actionMessageEl.style.display = 'block';
                setTimeout(() => {
                    actionMessageEl.style.display = 'none';
                }, 2000);
                feedbackMessageEl.textContent = 'Sai rồi! Bombardino Crocodilo ăn thịt bạn!';
                feedbackMessageEl.className = 'message-box incorrect';
            }

            currentQuestionIndex++;
            setTimeout(showNextQuestion, 2000);
        }

        function endGame() {
            questionBox.style.display = 'none';
            inputContainer.style.display = 'none';
            endContainerEl.classList.remove('hidden');
            
            endGameMessageEl.textContent = "Trò chơi kết thúc!";
            finalScoreEl.textContent = `Tổng tiền thưởng của bạn là: $${score}`;
            
            if (score >= 500) {
                medalImageEl.classList.remove('hidden');
                endGameMessageEl.textContent = "🎉 Chúc mừng, bạn đã chiến thắng! 🎉";
            }
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        checkButtonEl.addEventListener('click', handleCheck);
        answerInputEl.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') {
                handleCheck();
            }
        });
        restartButtonEl.addEventListener('click', initGame);

        initGame();
    </script>
</body>
</html>